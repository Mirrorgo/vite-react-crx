# vite-react-crx
[æœ¬ä»“åº“](https://github.com/Mirrorgo/vite-react-crx)åŸºäºreact,é‡‡ç”¨å„ç§æœ€æ–°çš„æŠ€æœ¯å¼€å‘chrome extension
## æŠ€æœ¯é€‰å‹&å¼€å‘ç¯å¢ƒ
* pnpm 6.31.0
  * å‚è§ğŸ‘‰[pnpm](https://juejin.cn/post/6932046455733485575)
* vite 2.8.0
  * å¿«
  * bundlelessä¸€å®šä¼šæˆä¸ºæœªæ¥ä¸»æµ,å½“å‰viteä½“éªŒæ›´å¥½
  * https://www.yuque.com/lalala-wm82o/qvhwgq/qkvgeo
* react 17.0.2
* manifest version:3
  * v2è¦è¢«æŠ›å¼ƒäº†
* typescript
## ä¸»è¦åŠŸèƒ½
* chromeç›¸å…³apiçš„ä»£ç è¡¥å…¨
* content-scriptæ³¨å…¥çš„å†…å®¹å¯ä»¥å†™jsxè€Œä¸æ˜¯åŸç”Ÿjs
* ä¼˜åŒ–devç¯å¢ƒä¸‹çš„å¼€å‘ä½“éªŒ,ä¸”å¯ä»¥ç›´æ¥çœ‹åˆ°content-script.jsæ³¨å…¥çš„UI(æ— éœ€åœ¨çœŸå®ç½‘é¡µä¸­å³å¯æŸ¥çœ‹content-script.jsæ³¨å…¥UIçš„æ•ˆæœ)
* æ’ä»¶çƒ­é‡è½½(ä¸éœ€è¦éº»çƒ¦çš„æ‰‹åŠ¨åˆ·æ–°å•¦)
## æœ¬é¡¹ç›®é‡‡ç”¨çš„é¡¹ç›®ç»“æ„
```
.
â”œâ”€â”€ dist //æ‰“åŒ…åçš„æ–‡ä»¶
|   â”œâ”€â”€ manifest.json
|   â”œâ”€â”€ options.js
|   â”œâ”€â”€ popup.js
|   â”œâ”€â”€ src_crx
|   â”‚   â”œâ”€â”€ service_worker.js
|   â”‚   â”œâ”€â”€ content_script.js
|   â”‚   â”œâ”€â”€ options.html
|   â”‚   â”œâ”€â”€ popup.html
|   â”‚   â””â”€â”€ src_content-script
|   â”‚       â””â”€â”€ main.js
|   â””â”€â”€ ...//å…¶ä»–å†…å®¹,ä¸å¿…å¤ªè¿‡å…³æ³¨,ä¸ä¸€ä¸€åˆ—ä¸¾äº†
â”œâ”€â”€ README.md
â”œâ”€â”€ index.html //devç¯å¢ƒä¸‹ç”¨äºæµ‹è¯•çš„é¡µé¢,æ‰“åŒ…æ—¶ä¸ä¼šä½¿ç”¨
â”œâ”€â”€ manifest.json //chromeæ’ä»¶çš„å…¥å£
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ src //index.htmlçš„reactæ–‡ä»¶
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ favicon.svg
â”‚   â”œâ”€â”€ main.tsx
â”‚   â””â”€â”€ vite-env.d.ts
â”œâ”€â”€ src_crx
â”‚   â”œâ”€â”€ service_worker.ts //æ‰“åŒ…åå°±æ˜¯service_worker.jsæ–‡ä»¶
â”‚   â”œâ”€â”€ content_script.ts //æ‰“åŒ…åå°±æ˜¯content_script.jsæ–‡ä»¶,é‡Œé¢æ³¨å…¥äº†ä¸€ä¸ªdomèŠ‚ç‚¹å’Œä¸€ä¸ªscriptæ ‡ç­¾(æŒ‡å‘src_content_script)
â”‚   â”œâ”€â”€ options.html //optionsé¡µé¢çš„å…¥å£
â”‚   â”œâ”€â”€ popup.html //popupé¡µé¢çš„å…¥å£
â”‚   â”œâ”€â”€ src_content_script //æ‰“åŒ…åä¸ºmain.jsæ–‡ä»¶,æè¿°äº†content-scriptæ‰€æ³¨å…¥çš„UIçš„reactæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ dev_index.html //ä¸ºäº†åœ¨devç¯å¢ƒä¸‹æ–¹ä¾¿æŸ¥çœ‹content-scriptæ³¨å…¥çš„UIçš„æ•ˆæœè€Œå»ºçš„htmlæ–‡ä»¶,åœ¨buildåä¸ä¼šåŒ…å«åœ¨å…¶ä¸­
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ src_options //optionsé¡µé¢çš„reactæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â””â”€â”€ src_popup //popupé¡µé¢çš„reactæ–‡ä»¶
â”‚       â”œâ”€â”€ App.tsx
â”‚       â””â”€â”€ main.tsx
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â””â”€â”€ vite.config.ts //viteçš„é…ç½®æ–‡ä»¶
```
## ä½¿ç”¨æ–¹æ³•
### å¸¸è§„å¼€å‘ç¯å¢ƒ
* è¿è¡Œdevå³å¯,ä¼šè¿›å…¥ä¸€ä¸ªä¸“ç”¨çš„å¼€å‘é¡µé¢,è¿™ä¸ªé¡µé¢åœ¨æ‰“åŒ…çš„æ—¶å€™å¹¶ä¸ä¼šåŒ…æ‹¬åœ¨å†…
chromeæ’ä»¶æœ¬èº«æ˜¯ä¸€ä¸ªå¤šé¡µé¢åº”ç”¨,æ‰€æœ‰çš„é¡µé¢éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„html
åˆ†éš”çº¿ä»¥ä¸Šçš„å†…å®¹åœ¨æ‰“åŒ…åä¹Ÿæ˜¯ä¸€ä¸ªhtmlé¡µé¢
åœ¨åˆ†å‰²çº¿ä»¥ä¸‹çš„å†…å®¹æ˜¯æ‰“åŒ…çš„æ—¶å€™ä¸ä¼šå®é™…å­˜åœ¨çš„é¡µé¢
æ¯”å¦‚content-script,åœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™æ˜¯ä¸€ä¸ªjsæ–‡ä»¶,æ³¨å…¥ç”¨æˆ·æ­£åœ¨æµè§ˆçš„é¡µé¢æ¥ä½¿ç”¨
è¿™é‡Œåªæ˜¯é¢å¤–ç¼–å†™äº†ä¸€ä¸ªhtmlé¡µé¢å¼•å…¥content-scriptæ³¨å…¥çš„å†…å®¹,ç”¨äºåœ¨å¼€å‘æ—¶æ›´æ–¹ä¾¿çš„æŸ¥çœ‹æ³¨å…¥çš„UIçš„æ•ˆæœ

### chromeæ’ä»¶ç¯å¢ƒ
* è¿è¡Œwatch
å‚è§ä¸‹æ–¹"æ’ä»¶çƒ­é‡è½½"éƒ¨åˆ†
* è¿è¡Œbuild
è¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯åœ¨è¿è¡Œè„šæœ¬ååœ¨å¼€å‘è€…æ¨¡å¼ä¸‹å¼•å…¥distæ–‡ä»¶å¤¹
watchè¿è¡Œåæ›´æ”¹æºç ä¼šè‡ªåŠ¨åˆ·æ–°
buildè¿è¡Œåéœ€è¦æ‰‹åŠ¨åˆ·æ–°æ’ä»¶
### æ’ä»¶çƒ­é‡è½½
é»˜è®¤å·²ç»åœ¨é¡¹ç›®çš„package.jsonä¸­é…ç½®æ’ä»¶çƒ­é‡è½½çš„æŒ‡ä»¤
```json
"scripts": {
    "dev": "vite",
    "watch": "tsc && vite build --watch",// å¼€å‘æ—¶ä½¿ç”¨å³å¯å®ç°æ’ä»¶çš„çƒ­é‡è½½
    "build": "tsc && vite build",
    "preview": "vite preview"
}
```
è¿™æ ·ï¼Œå¼€å‘æ—¶ä½¿ç”¨watchå³å¯å¯ç”¨çƒ­é‡è½½åŠŸèƒ½ï¼Œå…¶ä½“ç°åœ¨ 2 ä¸ªæ–¹é¢ï¼ˆä¿®æ”¹ä¿å­˜æ—¶ï¼‰ï¼š
* Chrome æµè§ˆå™¨è‡ªåŠ¨æ›´æ–°å½“å‰å¼€å‘çš„æ’ä»¶ï¼›
* æ­£åœ¨è°ƒç”¨çš„ç½‘é¡µä¼šè‡ªåŠ¨åˆ·æ–°
ä½†åœ¨æ‰“åŒ…å‘å¸ƒçš„æ—¶å€™ï¼Œè¯·ä½¿ç”¨ buildã€‚å› ä¸ºçƒ­é‡è½½æ—¶ï¼Œdist ä¸­ä¼šç”Ÿæˆå¤šä¸ªå’Œä½ é¡¹ç›®æ— å…³çš„ã€æ”¯æ’‘çƒ­é‡è½½åŠŸèƒ½çš„ä¸´æ—¶æ–‡ä»¶ã€‚
## æ­å»ºæ–¹æ³•
### æ–¹æ³•1(å³ä½¿ä½¿ç”¨æ–¹æ³•1,ä¹Ÿä¸€å®šè¦çœ‹çœ‹æ–¹æ³•2,è¿™æ ·å¯ä»¥æ›´å¥½çš„å¯¹è‡ªå·±é¡¹ç›®çš„é…ç½®è¿›è¡Œå„ç§ä¿®æ”¹)
ä¸‹è½½æœ¬é¡¹ç›®åˆ°æœ¬åœ°,åˆ é™¤æ‰ä¸éœ€è¦çš„å†…å®¹å³å¯
### æ–¹æ³•2
ä¸€æ­¥æ­¥æ­å»ºä¸€ä¸ªå’Œæœ¬é¡¹ç›®ä¸€è‡´çš„é¡¹ç›®ğŸ‘‰[æ•™ç¨‹](docs/guide.md)
## å‚è€ƒ
æ–‡æ¡£éƒ¨åˆ†å‚è€ƒäº†ğŸ‘‰[è¿™ç¯‡æ–‡ç« ](https://github.com/yeqisong/vite-plugin-vue-crx3/blob/master/README.md)
é¡¹ç›®æ„å»ºå‚è€ƒäº†ğŸ‘‰[è¿™ä¸ªé¡¹ç›®](https://github.com/KipSong/vite-chrome-extension)

## æ„Ÿè°¢
[vite-chrome-extensioné¡¹ç›®ä½œè€…](https://github.com/KipSong)çš„ç­”ç–‘è§£æƒ‘